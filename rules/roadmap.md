# Дорожная карта реализации аутентификации и дашборда

## Этап 1: Подготовка инфраструктуры
- [x] Анализ существующего кода и структуры проекта
- [x] Создание контекста аутентификации (AuthContext)
- [x] Настройка localStorage для сессий
- [x] Создание hook'ов для управления состоянием

## Этап 2: Интеграция базы данных SQLite с шифрованием
- [ ] Настройка SQLCipher для шифрования базы данных
- [ ] Создание таблицы пользователей с безопасным хешированием паролей
- [ ] Реализация безопасной логики регистрации и входа
- [ ] Интеграция с существующей системой аутентификации

## Этап 2: Логика аутентификации
- [x] Интеграция React Hook Form с Zod валидацией
- [x] Реализация функций login/register с имитацией API
- [x] Добавление обработки ошибок и уведомлений
- [x] Создание компонента ProtectedRoute

## Этап 3: Интеграция базы данных SQLite с шифрованием
- [x] Настройка SQLCipher для шифрования базы данных
- [x] Создание таблицы пользователей с безопасным хешированием паролей
- [x] Реализация безопасной логики регистрации и входа
- [x] Интеграция с существующей системой аутентификации

## Этап 4: Настройка JWT аутентификации и защита дашборда
- [x] Реализация JWT токенов для аутентификации
- [x] Защита дашборда с помощью токенов
- [x] Автоматический вход при наличии действительного токена

## Этап 5: Реализация бэкенда API
- [x] Создание Express сервера с маршрутами для регистрации и входа
- [x] Интеграция фронтенда с бэкендом через API
- [x] Обработка ошибок и валидация данных

## Этап 6: Повышение безопасности
- [x] Реализация middleware для ограничения количества запросов
- [x] Добавление HTTP заголовков безопасности
- [x] Защита от XSS и HTTP Parameter Pollution атак
- [x] Валидация данных на сервере

## Этап 7: Финальная проверка и тестирование
- [x] Создание скрипта для запуска сервера
- [x] Проверка всех компонентов системы
- [x] Тестирование аутентификации и авторизации
- [x] Проверка безопасности и устранение уязвимостей

## Этап 3: Обновление страницы Auth
- [ ] Добавление валидации форм
- [ ] Интеграция с состоянием аутентификации
- [ ] Редирект после успешного входа
- [ ] Улучшение UX с лоадерами

## Этап 4: Создание дашборда
- [x] Создание layout с Sidebar (используя ui/sidebar.tsx)
- [x] Интеграция дизайн-системы из rules-dashboard.md
- [x] Создание основных страниц дашборда:
  - [x] Dashboard главная (аналитика)
  - [x] Проекты
  - [x] Настройки аккаунта
  - [x] Биллинг

## Этап 5: Компоненты дашборда
- [x] Компонент статистики (карточки с метриками)
- [x] Компонент списка проектов
- [x] Компонент графиков/чартов
- [x] Компонент настроек профиля

## Этап 6: Роутинг и навигация
- [x] Добавление защищенных маршрутов /dashboard/*
- [x] Обновление App.tsx с новыми роутами
- [x] Навигация в Header для авторизованных пользователей
- [x] Функция logout

## Этап 7: Финальная полировка
- [ ] Тестирование всех сценариев
- [x] Проверка responsive дизайна
- [ ] Оптимизация производительности
- [x] Добавление анимаций Framer Motion

## Используемые технологии (из tech.txt)
- React Hook Form для форм
- Zod для валидации
- React Query для состояния (если нужно)
- Framer Motion для анимаций
- Shadcn UI компоненты
- Tailwind CSS для стилизации

## Структура файлов
```
src/
├── contexts/
│   └── AuthContext.tsx
├── hooks/
│   ├── useAuth.ts
│   └── useLocalStorage.ts
├── pages/
│   ├── Auth.tsx (обновить)
│   └── Dashboard/
│       ├── index.tsx
│       ├── Projects.tsx
│       ├── Settings.tsx
│       └── Analytics.tsx
├── components/
│   ├── ProtectedRoute.tsx
│   ├── DashboardLayout.tsx
│   └── dashboard/
│       ├── StatsCards.tsx
│       ├── ProjectList.tsx
│       └── UserProfile.tsx
└── types/
    └── auth.ts
```

## Дополнительные доработки
- [x] Изменение поведения кнопки "ВХОД" (редирект на /auth вместо модального окна)
- [x] Добавление валидации формы консультации
- [x] Реализация отправки заявки в Telegram

## Заметки по безопасности
- Хранение токена в localStorage (для demo)
- Валидация на фронтенде с Zod
- Очистка состояния при logout
- Автоматический редирект неавторизованных пользователей
- Использование HTTPS для запросов к Telegram API